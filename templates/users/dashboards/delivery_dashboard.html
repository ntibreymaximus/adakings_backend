{% extends 'base.html' %} {% block title %}Delivery Dashboard | Restaurant
Management System{% endblock %} {% block extra_css %}
{% endblock %} {% block content %}
<div class="container-fluid px-4 py-4">
<!-- Page Header -->
<div class="page-header card shadow-sm">
  <div class="card-body">
    <div class="row align-items-center">
      <div class="col-auto">
        <div class="page-icon-box">
          <i data-feather="truck"></i>
        </div>
      </div>
      <div class="col">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb mb-2">
            <li class="breadcrumb-item"><a href="{% url 'users:dashboard' %}" class="text-decoration-none">Dashboard</a></li>
            <li class="breadcrumb-item active" aria-current="page">Delivery</li>
          </ol>
        </nav>
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h1 class="page-title h3 mb-0">Delivery Dashboard</h1>
            <p class="text-muted mb-0">Manage deliveries, track orders, and monitor your performance</p>
          </div>
          <div class="page-actions">
            {# Add any page-specific actions here if needed #}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row mt-4"> {# Added mt-4 to space content from header #}
  <!-- Active Deliveries -->
  <div class="col-lg-8">
    <div class="delivery-card">
      <div class="delivery-card-header delivery-card-header-primary">
        <div class="d-flex justify-content-between align-items-center">
          <div><i data-feather="map" class="me-2 align-bottom"></i> Active Deliveries</div>
          <div>
            <span class="badge bg-light text-dark">Today: 8 Deliveries</span>
          </div>
        </div>
      </div>
      <div class="card-body">
        <!-- Current Delivery -->
        <div class="card mb-4">
          <div class="card-header bg-primary text-white">
            <div class="d-flex justify-content-between align-items-center">
              <h5 class="mb-0">
                <i data-feather="truck" class="me-2 align-bottom"></i> Current Delivery
              </h5>
              <span class="badge bg-warning">In Progress</span>
            </div>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6">
                <h6>Order #1039</h6>
                <p>
                  <strong>Customer:</strong> John Smith<br />
                  <strong>Address:</strong> 123 Main St, Apt 4B<br />
                  <strong>Phone:</strong> (555) 123-4567<br />
                  <strong>Items:</strong> 3 items, $42.15<br />
                  <strong>Estimated Delivery:</strong> 10:45 AM (5 min
                  remaining)
                </p>

                <div class="delivery-timeline mt-4">
                  <div class="timeline-item">
                    <div class="timeline-dot timeline-dot-completed"></div>
                    <div class="small text-muted">10:15 AM</div>
                    <div>Order picked up from restaurant</div>
                  </div>
                  <div class="timeline-item">
                    <div class="timeline-dot timeline-dot-current"></div>
                    <div class="small text-muted">10:40 AM (now)</div>
                    <div><strong>En route to customer</strong></div>
                  </div>
                  <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="small text-muted">Est. 10:45 AM</div>
                    <div>Delivery to customer</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="map-placeholder">
                  <div class="text-center">
                    <i data-feather="map-pin" style="width: 3rem; height: 3rem;" class="mb-3 text-muted"></i>
                    <p class="mb-0">Delivery route map would appear here</p>
                    <small class="text-muted">ETA: 5 minutes</small>
                  </div>
                </div>

                <div class="d-grid gap-2 mt-3">
                  <button class="btn btn-success">
                    <i data-feather="check-circle" class="me-1"></i> Mark as Delivered
                  </button>
                  <button class="btn btn-secondary">
                    <i data-feather="phone" class="me-1"></i> Contact Customer
                  </button>
                  <button class="btn btn-danger">
                    <i data-feather="alert-triangle" class="me-1"></i> Report Issue
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Next Delivery -->
        <h6 class="mb-3">Upcoming Deliveries</h6>
        <div class="list-group mb-3">
          <div class="list-group-item list-group-item-action">
            <div
              class="d-flex w-100 justify-content-between align-items-center"
            >
              <div>
                <h6 class="mb-1">
                  Order #1043
                  <span class="badge bg-info">Ready for Pickup</span>
                </h6>
                <p class="mb-1">
                  <small>
                    <i data-feather="map-pin" class="feather-sm"></i> 456 Elm St (2.3 miles)
                    <span class="mx-2">|</span>
                    <i data-feather="package" class="feather-sm"></i> 2 items
                    <span class="mx-2">|</span>
                    <i data-feather="dollar-sign" class="feather-sm"></i> $28.50
                  </small>
                </p>
              </div>
              <button class="btn btn-sm btn-primary"><i data-feather="truck" class="me-1"></i>Pick Up</button>
            </div>
          </div>
          <div class="list-group-item list-group-item-action">
            <div
              class="d-flex w-100 justify-content-between align-items-center"
            >
              <div>
                <h6 class="mb-1">
                  Order #1046 <span class="badge bg-secondary">Preparing</span>
                </h6>
                <p class="mb-1">
                  <small>
                    <i data-feather="map-pin" class="feather-sm"></i> 789 Oak Rd (1.5 miles)
                    <span class="mx-2">|</span>
                    <i data-feather="package" class="feather-sm"></i> 4 items
                    <span class="mx-2">|</span>
                    <i data-feather="dollar-sign" class="feather-sm"></i> $56.75
                  </small>
                </p>
              </div>
              <div class="text-muted small">Est. ready in 15 min</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Vehicle and Status Information -->
  <div class="col-lg-4">
    <!-- Delivery Staff Info -->
    <div class="delivery-card">
      <div class="delivery-card-header">
        <i data-feather="user" class="me-2 align-bottom"></i> My Delivery Profile
      </div>
      <div class="card-body">
        <div class="d-flex align-items-center mb-3">
          <div class="delivery-badge me-3">
            {{ user.first_name.0 }}{{ user.last_name.0 }}
          </div>
          <div>
            <h5 class="mb-0">{{ user.get_full_name }}</h5>
            <p class="mb-0 text-muted">Staff ID: {{ user.staff_id }}</p>
            <div>
              <span class="status-indicator status-online"></span>
              <small class="text-success">Online</small>
            </div>
          </div>
        </div>

        <div class="vehicle-info mb-3">
          <h6>Vehicle Information</h6>
          <div class="row">
            <div class="col-6">
              <small class="text-muted d-block">Type:</small>
              <span>{{ user.vehicle_type|default:"Not specified" }}</span>
            </div>
            <div class="col-6">
              <small class="text-muted d-block">Status:</small>
              <span class="text-success">Available</span>
            </div>
            <div class="col-12 mt-2">
              <small class="text-muted d-block">Delivery Zone:</small>
              <span>{{ user.delivery_zone|default:"Not assigned" }}</span>
            </div>
          </div>
        </div>

        <div class="mb-3">
          <h6>Today's Stats</h6>
          <div class="row text-center">
            <div class="col-4">
              <div class="h3 mb-0">8</div>
              <small class="text-muted">Deliveries</small>
            </div>
            <div class="col-4">
              <div class="h3 mb-0">5</div>
              <small class="text-muted">Completed</small>
            </div>
            <div class="col-4">
              <div class="h3 mb-0">3</div>
              <small class="text-muted">Pending</small>
            </div>
          </div>
        </div>
        <div class="d-grid gap-2">
          <button class="btn btn-danger btn-sm">
            <i data-feather="power" class="me-1"></i> Go Offline
          </button>
        </div>
      </div>
    </div>

    <!-- Assignment Notifications -->
    <div class="delivery-card">
      <div class="delivery-card-header">
        <i data-feather="bell" class="me-2 align-bottom"></i> Notifications
      </div>
      <div class="card-body p-0">
        <div class="list-group list-group-flush">
          <div class="list-group-item">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">New Delivery Assignment</h6>
              <small>Just now</small>
            </div>
            <p class="mb-1">You have been assigned Order #1046 for delivery.</p>
            <div>
              <button class="btn btn-sm btn-primary"><i data-feather="check" class="me-1"></i>Accept</button>
              <button class="btn btn-sm btn-secondary"><i data-feather="eye" class="me-1"></i>Details</button>
            </div>
          </div>
          <div class="list-group-item">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">Customer Left Review</h6>
              <small>30 mins ago</small>
            </div>
            <p class="mb-1">
              5 ★ rating for Order #1037. "Fast delivery, food was still hot!"
            </p>
          </div>
          <div class="list-group-item">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">Zone Update</h6>
              <small>1 hour ago</small>
            </div>
            <p class="mb-1">
              Your delivery zone has been updated to include Downtown area.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
<!-- Delivery History -->
  <div class="col-lg-8">
    <div class="card action-card"> {# Changed from delivery-card to action-card #}
      <div class="delivery-card-header"> {# Kept delivery-card-header if it has specific styles needed, or change to action-card-header #}
        <i data-feather="archive"></i> Delivery History {# Changed icon #}
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th class="ps-3">Order #</th>
                <th>Customer</th>
                <th>Status</th>
                <th class="text-end pe-3">Timestamp</th>
              </tr>
            </thead>
            <tbody>
              {# Example placeholder row, replace with actual data loop if available #}
              <tr>
                <td class="ps-3">-</td>
                <td>-</td>
                <td>-</td>
                <td class="text-end pe-3">-</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
{% endblock %}
