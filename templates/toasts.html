<div class="toast-container position-fixed top-0 end-0 p-3">
  {% if messages %}
    {% for message in messages %}
      <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header {% if message.tags == 'success' %}bg-success{% elif message.tags == 'error' or message.tags == 'danger' %}bg-danger{% elif message.tags == 'warning' %}bg-warning{% else %}bg-info{% endif %} text-white">
          <i class="me-2" data-feather="{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' or message.tags == 'danger' %}x-circle{% elif message.tags == 'warning' %}alert-triangle{% else %}info{% endif %}"></i>
          <strong class="me-auto">{{ message.tags|default:"Info"|title }}</strong>
          <small class="text-white-50">just now</small>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
          {{ message }}
        </div>
      </div>
    {% endfor %}
  {% endif %}
</div>

<style>
.toast-container {
  z-index: 1050;
}

.toast {
  min-width: 300px;
  background: white;
  margin-bottom: 0.5rem;
  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
  opacity: 1 !important;
}

.toast-header {
  border-bottom: none;
  padding: 0.75rem 1rem;
}

.toast-header .btn-close {
  margin-right: -0.5rem;
}

.toast-body {
  padding: 1rem; /* Keep default padding */
  /* The explicit background will be removed from the general .toast-body rule */
  /* border-radius is fine if it's for all toasts, but Bootstrap handles this too */
}

/* Style for toast bodies that are part of Django messages (those with a toast-header) */
.toast > .toast-header + .toast-body {
  background: rgba(255, 255, 255, 0.95); /* Apply the light background */
  color: #212529; /* Ensure dark text for contrast */
  border-bottom-left-radius: 0.25rem; /* Keep these if desired for Django messages */
  border-bottom-right-radius: 0.25rem;
}

/* For dynamic toasts created by the showToast function: */
/* Their .toast-body will not match the selector above. */
/* They will inherit background from their parent .toast element (e.g., .bg-success) */
/* and text color (e.g., .text-white) also from the parent .toast element. */
/* Padding is covered by the general .toast-body rule or Bootstrap defaults. */

.bg-success, .bg-danger, .bg-warning, .bg-info {
  color: white;
}

.bg-warning {
  color: #212529;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
  var toastElList = document.querySelectorAll(".toast");
  toastElList.forEach(function(toastEl) {
    var toast = new bootstrap.Toast(toastEl, {
      animation: true,
      autohide: true,
      delay: 5000
    });
    toast.show();
    feather.replace(); // Add this line
  });
});
</script>
